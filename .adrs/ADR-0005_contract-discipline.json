{
  "schema_type": "adr",
  "id": "ADR-0005",
  "title": "Type-Safety & Contract Discipline",
  "status": "active",
  "date": "2025-12-31",
  "review_date": "2026-06-30",
  "author": "Mycahya Eggleston",
  "scope": "core",
  "origin": "Extracted from engineering-tools ADR-0010",
  "context": {
    "description": "Maintaining strict type safety and contract versioning is challenging across a rapidly evolving stack.",
    "problem": "Without a clear hierarchy, documentation may duplicate contract definitions, leading to drift between source code and docs."
  },
  "decision": {
    "summary": "Contracts (Pydantic models) are Tier 0 - the immutable source of truth for all data structures. ADRs explain WHY, SPECs link to contracts for WHAT, Guides show HOW.",
    "tier_0_principles": {
      "definition": "Contracts are executable code (Pydantic models), not documentation artifacts",
      "single_source": "contracts/ is the only place where field definitions exist",
      "auto_generation": "JSON Schema generated from Pydantic via tools",
      "tier_separation": "ADRs=WHY, SPECs=WHAT, Guides=HOW - none duplicate field definitions"
    },
    "constraints": [
      "No hand-written schemas outside Pydantic",
      "Breaking changes require version bumps (__version__ in modules)",
      "All endpoints must be covered by type hints",
      "SPECs/Guides/ADRs MUST NOT duplicate contract field definitions"
    ]
  },
  "consequences": {
    "positive": [
      "Strong type safety across the stack",
      "Reduced risk of drift (single source of truth)",
      "Clear hierarchy: Tier 0 (contracts) → Tier 1 (why) → Tier 2 (what) → Tier 3 (how)",
      "Contract changes propagate automatically"
    ],
    "negative": [
      "Increased up-front effort",
      "Learning curve for Pydantic and type hinting"
    ]
  },
  "guardrails": [
    {"id": "contracts-pydantic", "rule": "All contracts MUST be defined in Pydantic"},
    {"id": "no-duplication", "rule": "SPECs/Guides/ADRs MUST NOT duplicate contract field definitions"},
    {"id": "type-hints", "rule": "All functions MUST have 100% type hint coverage"}
  ],
  "tags": ["type-safety", "contracts", "pydantic", "tier-0"]
}
