{
  "id": "PLAN-XXX",
  "title": "{Plan Title}",
  "status": "draft",
  "granularity": "L2",
  "created_at": "YYYY-MM-DD",
  "updated_at": "YYYY-MM-DD",
  "target_models": ["Claude Sonnet 3.5", "GPT-4o-mini", "Gemini 1.5 Flash", "Grok-2"],
  "source": {
    "discussion": "DISC-XXX",
    "spec": "SPEC-XXXX"
  },
  "objective": "{What this plan accomplishes}",
  "context": [
    "ARCHITECTURE: {Key architectural context}",
    "FILE: {Key files involved}",
    "ENUM: {Key enums or constants}",
    "FUNCTION: {Key functions to use}"
  ],
  "existing_patterns": [
    {
      "description": "{Pattern to follow}",
      "example_file": "{path/to/example.py}",
      "example_snippet": "{code snippet showing pattern}"
    }
  ],
  "milestones": [
    {
      "id": "M1",
      "name": "{Milestone Name}",
      "description": "{What this milestone delivers}",
      "status": "pending",
      "acceptance_criteria": [
        {
          "id": "AC-M1-01",
          "description": "{Acceptance criterion}",
          "verification_command": "{Command to verify}"
        }
      ],
      "tasks": [
        {
          "id": "T-M1-01",
          "description": "{Task description}",
          "status": "pending",
          "verification_command": "{grep/pytest/python -c command}",
          "context": [
            "ARCHITECTURE: {Relevant architecture}",
            "FILE: {Relevant file}",
            "FUNCTION: {Function to call/modify}"
          ],
          "hints": [
            "{Implementation hint 1}",
            "{Implementation hint 2}"
          ],
          "constraints": [
            "DO NOT {constraint}",
            "MUST {requirement}",
            "EXACTLY {specification}"
          ],
          "references": [
            "{path/to/reference/file.py}"
          ],
          "notes": ""
        }
      ]
    }
  ],
  "global_acceptance_criteria": [
    {
      "id": "AC-GLOBAL-01",
      "description": "All tests pass",
      "verification_command": "pytest tests/ -v"
    },
    {
      "id": "AC-GLOBAL-02",
      "description": "No lint errors",
      "verification_command": "ruff check ."
    },
    {
      "id": "AC-GLOBAL-03",
      "description": "Post-change verification passes (Mac: native, Win11: Docker)",
      "verification_command": "python scripts/detect_env.py && pytest tests/ -v",
      "notes": "On Win11 Docker: ./scripts/verify-changes.sh"
    }
  ],
  "completion": {
    "type": null,
    "date": null,
    "known_bugs": [],
    "deferred_to": null
  }
}
